@{
    Layout = null;
}


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="~/Content/AdminIndex/css/app.min.css" rel="stylesheet" />
    <link href="~/Content/AdminIndex/css/icons.min.css" rel="stylesheet" />
    <script src="~/Content/AdminIndex/js/app.min.js"></script>
    <link href="~/Content/layui/css/layui.css" rel="stylesheet" />
    <script src="~/Content/layui/layui.js"></script>
    @{ Models.InCome inCome = (Models.InCome)ViewData["InCome"];}
    <script type="text/javascript">
        layui.use('laydate', function () {
            var laydate = layui.laydate;

              laydate.render({
                elem: '#IncomeText'
                ,value: '@inCome.storageTime.ToShortDateString().ToString()'
                ,isInitValue: true
              });

            laydate.render({
                elem: '#ReckeckText'
                ,value: ''
                ,isInitValue: true
              });
        });

        function update() {
            $.ajax({
                url: "@Url.Action("InCome_update")",
                type: "post",
                data: $("form").serialize(),
                dataType: "json",
                success: function (data) {
                    data = eval("(" + data + ")");
                    if (data) {
                        alert("修改成功");
                        parent.closeWin2();
                        parent.openFrame("InCome_list");
                    } else {
                    }
                }
            });
        }
    </script>
</head>
<body>
    <section class="signin popup-in">
        <div class="container">
            <div class="sign-content popup-in-content">
                <div class="popup-in-txt">
                    <h2>修改材料</h2>
                    <div class="row">
                        <div class="col-12">
                            <div class="signin-form">
                                @using (Html.BeginForm("InCome_update", "Material", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @role = "form" }))
                                {
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">名称：</label>
                                            <input class="form-control" name="name1" type="text" value="@inCome.GetName(inCome.codeId).materialName" readonly=""/>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">规格：</label>
                                            <input class="form-control" name="model" type="text" value="@inCome.GetModel(inCome.codeId).modelName" readonly=""/>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">类别：</label>
                                            <input class="form-control" name="category" type="text" value="@inCome.GetCategory(inCome.categoryId).categoryName" />
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">编号：</label>
                                            <input class="form-control" name="materialCode" type="text" value="@Models.InCome.GetMaterialCode(inCome.codeId).code" readonly=""/>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">批号：</label>
                                            <input class="form-control" name="batch" type="text" value="@inCome.batch" />
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">计量单位：</label>
                                            @Html.DropDownList("unit", ViewBag.select as SelectList, new { @class = "form-control", id = "example-select" })
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">单价（元）：</label>
                                            <input class="form-control" name="unitPrice" type="text" value="@inCome.unitPrice" />
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">单价的单位：</label>
                                            @Html.DropDownList("priceMeasure", ViewBag.selectUnitPrice as SelectList, new { @class = "form-control", id = "example-select" })
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">操作人：</label>
                                            @Html.DropDownList("operator", ViewBag.selectOperator as SelectList, new { @class = "form-control", id = "example-select"})
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">数量：</label>
                                            <input class="form-control" name="amount" type="text" value="@inCome.amount" />
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">厂家：</label>
                                            @Html.DropDownList("manufacturer", ViewBag.selectMenu as SelectList, new { @class = "form-control", id = "example-select" })
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">放置位置：</label>
                                            @Html.DropDownList("position", ViewBag.selectPosition as SelectList, new { @class = "form-control", id = "example-select" })
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="layui-inline col-md-6 form-group">
                                            <label for="signin_form">入库时间:</label>
                                            <input type="text" class="layui-input form-control" id="IncomeText" name="IncomeText">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="signin_form">复检周期：</label>
                                            <input type="text" class="form-control" name="reviewCycle" value="@inCome.reviewCycle">
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="signin-footer">
                                <button type="button" class="btn btn-primary" onclick="update();">
                                    修改
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>